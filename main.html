<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.0"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <title>UMMroom</title>
  </head>
  <body>
    

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#"><div class="btn btn-danger"><b>UMMroom</b></div></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="sensor.php"><i class="fa fa-microchip"></i> Sensor</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="doc.html"><i class="fa fa-file-code-o"></i> Doc</a>
      </li>
    </ul>
  </div>
</nav>

<div id="app" class="container mt-5">
	<div class="row">
		<div class="col-3">
			<div class="px-2 py-4 bg-light rounded" style="height: 400px;">
				<a href="main.html" class="btn btn-block btn-light bg-white shadow text-left"><i class="fa fa-building"></i> Ruang kelas</a>
        <a href="about.html" class="mt-3 btn btn-block btn-light bg-white shadow text-left"><i class="fa fa-info-circle"></i> Info</a>
				<button class="mt-5 btn btn-block bg-light shadow text-center"></i> Logout</button>
			</div>
		</div>
		<div class="col-9">
        <div class="row">
          <div class="col">
            <div class="text-center py-4 px-2 m-1 rounded bg-white shadow">
              <h1 class="text-success">{{ empty }}</h1>
              <div style="font-size: 12px"><span>kosong</span></div>
            </div>
          </div>
          <div class="col">
            <div class="text-center text-white py-4 px-2 m-1 rounded bg-danger shadow">
              <div class="text-left" style="font-size: 12px"><span>Total</span></div>
              <h1>{{ total }}</h1>
              <div style="font-size: 12px"><span>Ruangan</span></div>
            </div>
          </div>
          <div class="col">
            <div class="text-center py-4 px-2 m-1 rounded bg-white shadow">
              <h1 class="text-warning">{{ inuse }}</h1>
              <div style="font-size: 12px"><span>Digunakan</span></div>
            </div>
          </div>
        </div>
        <div class="mt-4 mb-5 p-2 bg-white rounded shadow">
          <div class="py-2">Pantauan Realtime</div>
          <div class="row">
            <div class="col">
              <div class="p-2 rounded bg-light" style="height: 100px">
                4.16
                <div v-html="s416"></div>
              </div>
            </div>
            <div class="col">
              <div class="p-2 rounded bg-light"  style="height: 100px">
                4.17
                <div v-html="s417"></div>
              </div>
            </div>
            <div class="col">
              <div class="p-2 rounded bg-light"  style="height: 100px">
                4.18
                <div v-html="s418"></div>
              </div>
            </div>
            <div class="col">
              <div class="p-2 rounded bg-light"  style="height: 100px">
                4.19
                <div v-html="s419"></div>
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col">
              <div class="p-2 rounded bg-light"  style="height: 100px">
                5.26
                <div v-html="s526"></div>
              </div>
            </div>
            <div class="col">
              <div class="p-2 rounded bg-light"  style="height: 100px">
                5.28a
                <div v-html="s528a"></div>
              </div>
            </div>
            <div class="col">
              <div class="p-2 rounded bg-light"  style="height: 100px">
                5.28b
                <div v-html="s528b"></div>
              </div>
            </div>
            <div class="col">
              <div class="p-2 rounded bg-light"  style="height: 100px">
                5.30
                <div v-html="s530"></div>
              </div>
            </div>
          </div>
<!--           <div class="text-center">
            <button class="mt-3 btn btn-primary" v-on:click="update()">Update</button>
          </div> -->
          <!-- <div class="mt-4 py-4 text-center">Riwayat</div> -->
          <div class="p-2 mt-5 border-top text-center" style="font-size: 10px">
            UMMroom - <span class="text-danger"> @fazaio</span> - 201610130311117 
          </div>
        </div>
    </div>
	</div>
</div>
  </body>
</html>

<script>
new Vue({
  el: '#app',
  data: {
    data: '',
    empty: '',
    inuse: '',
    total: '',
    s416: '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>',
    s417: '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>',
    s418: '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>',
    s419: '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>',
    s526: '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>',
    s528a: '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>',
    s528b: '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>',
    s530: '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
  },
  methods: {
    getData: function() {
      var vm = this;
      axios.get('data.php').then(function(response) {
        vm.total = response.data["room_total"];
        vm.empty = response.data["room_empty"];
        vm.inuse = response.data["room_inuse"];

        var res = response.data
        if (response.data.room["4.16"] == 1) {
          vm.s416 = '<div class="p-2"><i class="fa fa-circle text-success"></i><span style="font-size: 12px"> Kosong</span></div>'
        }else{
          vm.s416 = '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
        }
        if (response.data.room["4.17"] == 1) {
          vm.s417 = '<div class="p-2"><i class="fa fa-circle text-success"></i><span style="font-size: 12px"> Kosong</span></div>'
        }else{
          vm.s417 = '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
        }
        if (response.data.room["4.18"] == 1) {
          vm.s418 = '<div class="p-2"><i class="fa fa-circle text-success"></i><span style="font-size: 12px"> Kosong</span></div>'
        }else{
          vm.s418 = '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
        }
        if (response.data.room["4.19"] == 1) {
          vm.s419 = '<div class="p-2"><i class="fa fa-circle text-success"></i><span style="font-size: 12px"> Kosong</span></div>'
        }else{
          vm.s419 = '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
        }
        if (response.data.room["5.26"] == 1) {
          vm.s526 = '<div class="p-2"><i class="fa fa-circle text-success"></i><span style="font-size: 12px"> Kosong</span></div>'
        }else{
          vm.s526 = '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
        }
        if (response.data.room["5.28a"] == 1) {
          vm.s528a = '<div class="p-2"><i class="fa fa-circle text-success"></i><span style="font-size: 12px"> Kosong</span></div>'
        }else{
          vm.s528a = '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
        }
        if (response.data.room["5.28b"] == 1) {
          vm.s528b = '<div class="p-2"><i class="fa fa-circle text-success"></i><span style="font-size: 12px"> Kosong</span></div>'
        }else{
          vm.s528b = '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
        }
        if (response.data.room["5.30"] == 1) {
          vm.s530 = '<div class="p-2"><i class="fa fa-circle text-success"></i><span style="font-size: 12px"> Kosong</span></div>'
        }else{
          vm.s530 = '<div class="p-2"><i class="fa fa-circle text-danger"></i><span style="font-size: 12px"> Dipakai</span></div>'
        }

      }, function(error) {
        console.log(error.statusText);
      });
    },
    update: function(){
      this.getData();
    }
  },
  mounted: function() {
    setInterval(function () {
          this.getData();
     }.bind(this), 500); 
  }
})
</script>